<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <title>Chriswood Betalen</title>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <h1>Kies je kunstwerk(en)</h1>

  <button onclick="addToCart('price_1ShcPDDKBwjX9ElPoBi4lj4W', 'Energie Kunstwerk', 16)">Voeg toe: Energie Kunstwerk - €16</button><br><br>

  <button onclick="addToCart('price_voorbeeld2', 'Kunstwerk 2', 15)">Voeg toe: Kunstwerk 2 - €15</button><br><br>

  <button onclick="addToCart('price_voorbeeld3', 'Kunstwerk 3', 14)">Voeg toe: Kunstwerk 3 - €14</button><br><br>

  <h2>Winkelmandje</h2>
  <ul id="cart-items"></ul>
  <p><strong>Totaal: €<span id="total">0</span></strong></p>

  <button id="checkout-button" onclick="goToCheckout()" disabled style="font-size:20px;padding:15px 30px;">
    Afrekenen via Stripe
  </button>

  <script>
    const stripe = Stripe('pk_test_51ShbijDKBwjX9ElPpXBRbO4BjbScRaXuaxNQeKeDF50Isnyw00K8a79HvgsU3JVkeWfdaai0Z1NpjV5uKXfjF6w700Mp1j02QU');

    let cart = []; // hier zitten de producten in

    function addToCart(priceId, name, amount) {
      cart.push({ price: priceId, quantity: 1 });
      updateCart();
    }

    function updateCart() {
      const list = document.getElementById('cart-items');
      const totalEl = document.getElementById('total');
      const checkoutBtn = document.getElementById('checkout-button');

      list.innerHTML = '';
      let total = 0;

      cart.forEach((item, index) => {
        const li = document.createElement('li');
        li.textContent = `Product ${index + 1} - €${getAmount(item.price)}`;
        list.appendChild(li);
        total += getAmount(item.price);
      });

      totalEl.textContent = total;
      checkoutBtn.disabled = cart.length === 0;
    }

    function getAmount(priceId) {
      const map = {
        'price_1ShcPDDKBwjX9ElPoBi4lj4W': 16,
        'price_voorbeeld2': 15,
        'price_voorbeeld3': 14
      };
      return map[priceId] || 0;
    }

    function goToCheckout() {
      if (cart.length === 0) return;

      stripe.redirectToCheckout({
        lineItems: cart,
        mode: 'payment',
        successUrl: window.location.origin + '/succes.html',
        cancelUrl: window.location.origin + '/cancel.html',
      });
    }
  </script>
</body>
</html>
