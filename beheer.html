<script>
  const form = document.getElementById("productForm");
  const preview = document.getElementById("preview");

  let producten = JSON.parse(localStorage.getItem("beheerProducten")) || [];

  function toonProducten() {
    preview.innerHTML = "";
    producten.forEach((p, index) => {
      const div = document.createElement("div");
      div.className = "product-card";
      div.innerHTML = `
        <img src="${p.afbeelding}" alt="${p.naam}">
        <h2>${p.naam}</h2>
        <p>Prijs: â‚¬${p.prijs.toFixed(2)}</p>
        <p>Voorraad: ${p.voorraad}</p>
        <p><a href="${p.pagina}">Bekijk productpagina</a></p>
        <button onclick="verwijderProduct(${index})">Verwijder</button>
      `;
      preview.appendChild(div);
    });
  }

  function verwijderProduct(index) {
    if (confirm("Weet je zeker dat je dit product wilt verwijderen?")) {
      producten.splice(index, 1);
      localStorage.setItem("beheerProducten", JSON.stringify(producten));
      toonProducten();
    }
  }

  form.addEventListener("submit", function(e) {
    e.preventDefault();
    const nieuwProduct = {
      naam: document.getElementById("naam").value,
      prijs: parseFloat(document.getElementById("prijs").value),
      voorraad: parseInt(document.getElementById("voorraad").value),
      afbeelding: document.getElementById("afbeelding").value,
      pagina: document.getElementById("pagina").value
    };
    producten.push(nieuwProduct);
    localStorage.setItem("beheerProducten", JSON.stringify(producten));
    form.reset();
    toonProducten();
  });

  toonProducten();
</script>
